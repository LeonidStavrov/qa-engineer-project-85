---
- summary: |
    Проверка успешной регистрации с валидными данными
  requirement: |
    При вводе корректных данных пользователь должен зарегистрироваться в системе
  prerequisites: |
    Открыта страница регистрации
  test-data: |
    Nickname = test
    Email = test@mail.com
    Password = password.
  steps:
    - Ввести "test" в поле Nickname
    - Ввести "test@mail.com" в поле Email
    - Ввести "password" в поле Password
    - Повторить "password" в поле Password confirmation
    - Нажать кнопку Submit
  expected-result: |
    - Пользователь перенаправлен на главную страницу
    - Новая запись появилась в базе данных

- summary: |
    Проверка регистрации с некорректным email
  requirement: |
    Система должна блокировать регистрацию с некорректным email
  prerequisites: |
    Открыта страница регистрации
  test-data: |
    Nickname = test2
    Email = incorrect@mail.com
    Password = password.
  steps:
    - Ввести "test2" в поле Nickname
    - Ввести "incorrect@mail.com" в поле Email
    - Ввести "password." в поле Password
    - Повторить "password." в поле подтверждения
    - Нажать кнопку Submit
  expected-result: |
    - Появилось сообщение "Invalid email"
    - Пользователь остался на странице регистрации

- summary: |
    Проверка входа через GitHub OAuth
  requirement: |
    Пользователь должен авторизоваться через GitHub без ввода данных на сайте
  prerequisites: |
    Открыта главная страница
    GitHub-аккаунт не привязан к другим профилям
  test-data: |
    Нет
  steps:
    - Нажать кнопку "Sign up with Github"
    - Авторизоваться на GitHub
    - Подтвердить разрешения для Codebattle
  expected-result: |
    - Пользователь перенаправлен на главную страницу
    - GitHub аккаунт отображается в профиле

- summary: |
    Проверка восстановления пароля
  requirement: |
    Система должна отправлять письмо для сброса пароля на указанный email
  prerequisites: |
    Открыта страница входа
  test-data: |
    Email = test@mail.com
  steps:
    - Нажать "Forgot your password?"
    - Ввести "test@mail.com" в поле Email
    - Нажать кнопку "Submit"
  expected-result: |
    - Письмо с инструкциями отправлено на testuser@example.com
    - Появилось уведомление об отправке письма

- summary: |
    Проверка гостевого режима
  requirement: |
    Система должна позволять пробную игру без авторизации
  prerequisites: |
    Пользователь не авторизован
  test-data: |
    Нет
  steps:
    - Нажать кнопку "Try simple battle"
    - Дождаться загрузки игровой сессии
  expected-result: |
    - Открыта страница с игрой
    - Поле для ввода кода доступно для редактирования

- summary: |
    Проверка создания игры с ботом
  requirement: |
    Пользователь должен создавать игру с указанными параметрами
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Level = easy
    Game type = With a bot
    Time control = 8 min
    Task = pizza_volume
  steps:
    - Нажать "Create a game"
    - Установить указанные параметры
    - Нажать "Create battle"
    - Дождаться загрузки
  expected-result: |
    - Открыта игровая сессия с ботом
    - Параметры соответствуют заданным

- summary: |
    Проверка приглашения в игру
  requirement: |
    Система должна отправлять уведомление приглашенному пользователю
  prerequisites: |
    Оба пользователя авторизованы
  test-data: |
    Level = elementary
    Game type = With a friend
  steps:
    - Создать игру с указанными параметрами
    - Нажать "Invite"
    - Выбрать пользователя из списка
  expected-result: |
    - У приглашенного появилось уведомление
    - Уведомление содержит информацию об игре

- summary: |
    Проверка редактирования профиля
  requirement: |
    Пользователь должен изменять и сохранять данные профиля
  prerequisites: |
    Пользователь авторизован
    Открыта страница настроек профиля
  test-data: |
    Nickname = New Nickname
    Your weapon = Python
  steps:
    - Изменить Nickname на "New Nickname"
    - Изменить Your weapon на "Python"
    - Нажать "Save"
    - Перезагрузить страницу
  expected-result: |
    - Данные сохранились после перезагрузки
    - Новые значения отображаются в профиле

- summary: |
    Проверка просмотра истории игр
  requirement: |
    Система должна отображать историю завершенных игр
  prerequisites: |
    Пользователь авторизован
    Есть завершенные игры
  test-data: |
    Нет
  steps:
    - Перейти в раздел "History"
    - Выбрать любую завершенную игру
    - Нажать "Show"
  expected-result: |
    - Открылась страница с деталями игры
    - Доступно воспроизведение хода игры

- summary: |
    Проверка чата в игровой сессии
  requirement: |
    Система должна поддерживать обмен сообщениями между игроками
  prerequisites: |
    Активная игровая сессия с двумя игроками
  test-data: |
    Message = "Test message"
  steps:
    - Ввести "Test message" в поле чата
    - Нажать кнопку отправки
  expected-result: |
    - Сообщение появилось в чате
